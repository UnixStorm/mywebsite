<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>UNIXSTORM</title>

<style>
body {
    margin: 0;
    padding: 0;
    height: 100vh;
    background: url("3cc68b3f22ff5463843e82b661033950.jpg") no-repeat center center fixed;
    background-size: cover;
    font-family: "Arial";
}

/* Ã¼st yazÄ± */
.yazi-kutu {
    width: 100%;
    text-align: center;
    margin-top: 40px;
}
.anaYazi {
    font-size: 18px;
    color: white;
    font-weight: bold;
    text-shadow: 0 0 6px white, 0 0 14px white;
}
.vip {
    color: orange;
    font-size: 17px;
    text-shadow: 0 0 6px orange, 0 0 15px orange;
    font-weight: bold;
}
.red {
    color: red;
    font-weight: bold;
    text-shadow: 0 0 6px red, 0 0 15px red;
}

/* FORM KUTUSU */
.center-box {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 300px;
    padding: 22px;
    background: rgba(0,0,0,0.70);
    backdrop-filter: blur(5px);
    border-radius: 12px;
    box-shadow: 0 0 22px rgba(0,0,0,0.65);
    text-align: center;
    color: white;
    transition: opacity 0.4s ease;
}

.center-box input {
    width: 100%;
    padding: 10px;
    margin: 7px 0;
    border-radius: 6px;
    border: none;
    outline: none;
}

.center-box button {
    width: 100%;
    padding: 10px;
    margin-top: 6px;
    border: none;
    border-radius: 6px;
    background: #006CFF;
    color: white;
    font-weight: bold;
    cursor: pointer;
}

.link-btn {
    margin-top: 8px;
    display: block;
    color: #ddd;
    cursor: pointer;
    text-decoration: underline;
    font-size: 14px;
}

/* DURUM */
#durum {
    margin-top: 10px;
    font-size: 14px;
    min-height: 20px;
    color: #fff;
}

/* TIKLAMAYI BLOKLAYAN ALAN */
#blocker {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.0);
  z-index: 9999;
  display: none;
  pointer-events: auto;
}

/* FORM GEÃ‡Ä°Å BEKLEME YAZISI */
#bekleAnim {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%,-50%);
    color: white;
    font-size: 18px;
    font-weight: bold;
    display: none;
    text-shadow: 0 0 8px white;
}
</style>
</head>

<body>

<div class="yazi-kutu">
  <div class="anaYazi">ğğ® ğ¬ğ¢ğ­ğ ğ–£˜ğ”ğğˆğ—ğ’ğ“ğğ‘ğŒğŸ‡¹ğŸ‡· á´›á´€Ê€á´€Ò“Ä±É´á´…á´€É´ á´‹á´œÊ€á´œÊŸá´á´œsÌ§á´›á´œÊ€</div>
  <div style="margin-top: 6px;">
    <span class="vip">ğ˜ƒğ—¶ğ—½_ğ˜‚ğ˜†ğ—²ğ—¹ğ—²ğ—¿ğŸ”± = </span>
    <span class="red">ğŠğ€ğ€ğ ğ™ğğ‘ğğ€ & ğˆğğ…ğ€ğ™ ğ™ğğ‘ğğ€</span>
  </div>
</div>

<div class="center-box" id="formBox">

    <!-- BEKLEYÄ°NÄ°Z YAZISI -->
    <div id="bekleAnim">LÃ¼tfen bekleyiniz...</div>

    <!-- KayÄ±t Formu -->
    <div id="registerForm">
        <h3>KayÄ±t Ol</h3>
        <input type="text" id="regName" placeholder="KullanÄ±cÄ± adÄ±">
        <input type="email" id="regMail" placeholder="E-posta">
        <input type="password" id="regPass" placeholder="Åifre">
        <input type="file" id="regPhoto" accept="image/*">
        <button id="regBtn">KayÄ±t Ol</button>

        <span class="link-btn" id="toLogin">GiriÅŸ yapÄ±n</span>
        <span class="link-btn" id="toReset">Åifremi unuttum</span>
    </div>

    <!-- GiriÅŸ -->
    <div id="loginForm" style="display:none;">
        <h3>GiriÅŸ Yap</h3>
        <input type="email" id="loginMail" placeholder="E-posta">
        <input type="password" id="loginPass" placeholder="Åifre">
        <button id="loginBtn">GiriÅŸ Yap</button>

        <span class="link-btn" id="toRegisterFromLogin">KayÄ±t olmak istiyorum</span>
        <span class="link-btn" id="toResetFromLogin">Åifremi unuttum</span>
    </div>

    <!-- Reset -->
    <div id="resetForm" style="display:none;">
        <h3>Åifre SÄ±fÄ±rla</h3>
        <input type="email" id="resetMail" placeholder="E-posta">
        <button id="resetBtn">SÄ±fÄ±rlama linki gÃ¶nder</button>

        <span class="link-btn" id="toLoginFromReset">GiriÅŸe dÃ¶n</span>
    </div>

    <div id="durum"></div>
</div>

<div id="blocker"></div>

<!-- FIREBASE -->
<script type="module">

/* Firebase */
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-app.js";
import {
  getAuth,
  createUserWithEmailAndPassword,
  signInWithEmailAndPassword,
  sendPasswordResetEmail
} from "https://www.gstatic.com/firebasejs/12.6.0/firebase-auth.js";
import {
  getFirestore, setDoc, getDocs, collection, query, where, doc
} from "https://www.gstatic.com/firebasejs/12.6.0/firebase-firestore.js";
import {
  getStorage, ref, uploadBytes, getDownloadURL
} from "https://www.gstatic.com/firebasejs/12.6.0/firebase-storage.js";

/* Config */
const firebaseConfig = {
apiKey: "AIzaSyC5X_RnBnhy2k-X6Y_lezHgWbgK31Y5Dao",
authDomain: "unixstorm-9dff8.firebaseapp.com",
projectId: "unixstorm-9dff8",
storageBucket: "unixstorm-9dff8.firebasestorage.app",
messagingSenderId: "787509821542",
appId: "1:787509821542:web:2b54b5bafee1207edeada7",
measurementId: "G-BQYS1575QZ"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db   = getFirestore(app);
const storage = getStorage(app);

const durum = document.getElementById("durum");
const blocker = document.getElementById("blocker");
const bekleAnim = document.getElementById("bekleAnim");
const formBox = document.getElementById("formBox");

/* FORM GEÃ‡Ä°ÅLERÄ° */
document.getElementById("toLogin").onclick = ()=> formDegistir('login');
document.getElementById("toReset").onclick = ()=> formDegistir('reset');
document.getElementById("toRegisterFromLogin").onclick = ()=> formDegistir('register');
document.getElementById("toResetFromLogin").onclick = ()=> formDegistir('reset');
document.getElementById("toLoginFromReset").onclick = ()=> formDegistir('login');

/* -------------------------
     FORM GEÃ‡Ä°Å ANÄ°MASYONU
------------------------- */
async function formDegistir(target){

    durum.textContent = "";
    bekleAnim.style.display = "block";
    blockUI();

    formBox.style.opacity = "0.3";

    await new Promise(r=>setTimeout(r,3000)); // 3 saniye bekleme

    bekleAnim.style.display = "none";
    formBox.style.opacity = "1";
    unblockUI();

    document.getElementById("registerForm").style.display = "none";
    document.getElementById("loginForm").style.display = "none";
    document.getElementById("resetForm").style.display = "none";

    document.getElementById(target + "Form").style.display = "block";
}

/* UI blok */
function blockUI(){ blocker.style.display="block"; }
function unblockUI(){ blocker.style.display="none"; }

/* -------------------------
     KAYIT
------------------------- */
regBtn.onclick = async function(){
    const ad = document.getElementById("regName").value.trim();
    const mail = document.getElementById("regMail").value.trim();
    const pass = document.getElementById("regPass").value;
    const foto = document.getElementById("regPhoto").files[0];

    if(!ad || !mail || !pass){ durum.textContent="LÃ¼tfen tÃ¼m alanlarÄ± doldurun."; return; }

    blockUI();
    durum.textContent="Kontrol ediliyor...";
    await new Promise(r=>setTimeout(r,3000));

    try{
        const q = query(collection(db,"kullanicilar"), where("kullaniciAdi","==",ad));
        const snap = await getDocs(q);
        if(!snap.empty){ durum.textContent="âš  Bu kullanÄ±cÄ± adÄ± zaten var!"; unblockUI(); return; }

        durum.textContent="KayÄ±t yapÄ±lÄ±yor...";
        const cred = await createUserWithEmailAndPassword(auth,mail,pass);

        let photoURL="";
        if(foto){
            const sRef = ref(storage,"profilFoto/"+cred.user.uid);
            await uploadBytes(sRef,foto);
            photoURL = await getDownloadURL(sRef);
        }

        await setDoc(doc(db,"kullanicilar",cred.user.uid),{
            kullaniciAdi:ad,
            email:mail,
            photoURL:photoURL,
            createdAt:new Date().toISOString()
        });

        durum.textContent="âœ” Hesap oluÅŸturuldu, yÃ¶nlendiriliyorsunuz...";
        await new Promise(r=>setTimeout(r,5000));
        location.href="ana_site.html";

    }catch(e){
        durum.textContent="Hata: " + e.message;
        unblockUI();
    }
};

/* -------------------------
     GÄ°RÄ°Å
------------------------- */
loginBtn.onclick = async function(){
    const mail = loginMail.value.trim();
    const pass = loginPass.value;

    if(!mail || !pass){ durum.textContent="LÃ¼tfen bilgileri girin."; return; }

    blockUI();
    durum.textContent="GiriÅŸ yapÄ±lÄ±yor...";

    try{
        await signInWithEmailAndPassword(auth,mail,pass);
        durum.textContent="âœ” GiriÅŸ baÅŸarÄ±lÄ±, yÃ¶nlendiriliyorsunuz...";
        await new Promise(r=>setTimeout(r,5000));
        location.href="ana_site.html";

    }catch(e){
        durum.textContent="Hata: " + e.message;
        unblockUI();
    }
};

/* -------------------------
     ÅÄ°FRE SIFIRLAMA
------------------------- */
resetBtn.onclick = async function(){
    const mail = resetMail.value.trim();
    if(!mail){ durum.textContent="E-posta girin."; return; }

    blockUI();
    durum.textContent="Kontrol ediliyor...";
    await new Promise(r=>setTimeout(r,3000));

    try{
        const q = query(collection(db,"kullanicilar"), where("email","==",mail));
        const snap = await getDocs(q);

        if(snap.empty){
            durum.textContent="Bu e-posta ile hesap bulunamadÄ±.";
            unblockUI();
            return;
        }

        await sendPasswordResetEmail(auth,mail);

        durum.textContent="âœ” SÄ±fÄ±rlama linki gÃ¶nderildi!";
        await new Promise(r=>setTimeout(r,4000));
        unblockUI();

    }catch(e){
        durum.textContent="Hata: "+e.message;
        unblockUI();
    }
};

unblockUI();
</script>


<!-- MÃ¼zik -->
<button id="musicBtn" style="
position: fixed;
bottom: 20px;
right: 20px;
padding: 12px 20px;
font-size: 18px;
border: none;
border-radius: 10px;
background: rgba(0,0,0,0.6);
color: white;
cursor: pointer;
">â–¶ Oynat</button>

<audio id="bgm">
  <source src="music.m4a" type="audio/mp4">
</audio>

<script>
const audio = document.getElementById("bgm");
const btn = document.getElementById("musicBtn");

btn.onclick = () => {
    if(audio.paused){
        audio.play();
        btn.textContent="â¸ Durdur";
    } else {
        audio.pause();
        btn.textContent="â–¶ Oynat";
    }
};
</script>

</body>
</html>
