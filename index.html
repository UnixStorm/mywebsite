<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>UNIXSTORM</title>

<style>
body{
    margin:0;
    padding:0;
    height:100vh;
    background:url("3cc68b3f22ff5463843e82b661033950.jpg") no-repeat center center fixed;
    background-size:cover;
    font-family:Arial;
}

.yazi-kutu{
    width:100%;
    text-align:center;
    margin-top:28px;
}

.anaYazi{
    font-size:18px;
    color:white;
    font-weight:bold;
    text-shadow:0 0 6px white,0 0 14px white;
}

.vip{
    color:orange;
    font-size:17px;
    font-weight:bold;
    text-shadow:0 0 6px orange,0 0 15px orange;
}

.red{
    color:red;
    font-weight:bold;
    text-shadow:0 0 6px red,0 0 15px red;
}

.center-box{
    position:fixed;
    top:50%;
    left:50%;
    transform:translate(-50%,-50%);
    width:280px;
    padding:18px;
    background:rgba(0,0,0,0.78);
    backdrop-filter:blur(5px);
    border-radius:12px;
    text-align:center;
    color:white;
}

input{
    width:100%;
    padding:10px;
    margin:6px 0;
    border-radius:8px;
    border:none;
    outline:none;
    font-size:15px;
}

button{
    width:100%;
    padding:10px;
    margin-top:8px;
    border:none;
    border-radius:8px;
    background:#006CFF;
    font-size:16px;
    color:white;
    font-weight:bold;
    cursor:pointer;
}

.link-btn{
    display:block;
    margin-top:8px;
    color:#ddd;
    text-decoration:underline;
    cursor:pointer;
    font-size:14px;
}

#durum{
    min-height:22px;
    margin-top:10px;
}
</style>
</head>

<body>

<div class="yazi-kutu">
    <div class="anaYazi">ğğ® ğ¬ğ¢ğ­ğ ğ–£˜ğ”ğğˆğ—ğ’ğ“ğğ‘ğŒğŸ‡¹ğŸ‡· á´›á´€Ê€á´€Ò“Ä±É´á´…á´€É´ á´‹á´œÊ€á´œÊŸá´á´œsÌ§á´›á´œÊ€</div>
    <div style="margin-top:6px;">
        <span class="vip">ğ˜ƒğ—¶ğ—½_ğ˜‚ğ˜†ğ—²ğ—¹ğ—²ğ—¿ğŸ”± = </span>
        <span class="red">ğŠğ€ğ€ğ ğ™ğğ‘ğğ€ & ğˆğğ…ğ€ğ™ ğ™ğğ‘ğğ€</span>
    </div>
</div>

<div class="center-box">

<!-- KAYIT -->
<div id="registerForm">
    <h3>KayÄ±t Ol</h3>
    <input type="text" id="regName" placeholder="KullanÄ±cÄ± adÄ±">
    <input type="email" id="regMail" placeholder="E-posta">
    <input type="password" id="regPass" placeholder="Åifre">
    <button id="regBtn">KayÄ±t Ol</button>
    <span class="link-btn" id="toLogin">GiriÅŸ yapÄ±n</span>
    <span class="link-btn" id="toReset">Åifremi unuttum</span>
</div>

<!-- GÄ°RÄ°Å -->
<div id="loginForm" style="display:none;">
    <h3>GiriÅŸ Yap</h3>
    <input type="email" id="loginMail" placeholder="E-posta">
    <input type="password" id="loginPass" placeholder="Åifre">
    <button id="loginBtn">GiriÅŸ Yap</button>
    <span class="link-btn" id="toRegisterFromLogin">KayÄ±t olmak istiyorum</span>
    <span class="link-btn" id="toResetFromLogin">Åifremi unuttum</span>
</div>

<!-- RESET -->
<div id="resetForm" style="display:none;">
    <h3>Åifre SÄ±fÄ±rla</h3>
    <input type="email" id="resetMail" placeholder="E-posta">
    <button id="resetBtn">SÄ±fÄ±rlama linki gÃ¶nder</button>
    <span class="link-btn" id="toLoginFromReset">GiriÅŸe dÃ¶n</span>
</div>

<div id="durum"></div>

</div>

<!-- FIREBASE -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-app.js";
import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, sendPasswordResetEmail } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-auth.js";
import { getFirestore, setDoc, doc } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-firestore.js";

const firebaseConfig = {
  apiKey:"AIzaSyC5X_RnBnhy2k-X6Y_lezHgWbgK31Y5Dao",
  authDomain:"unixstorm-9dff8.firebaseapp.com",
  projectId:"unixstorm-9dff8",
  storageBucket:"unixstorm-9dff8.appspot.com",
  messagingSenderId:"787509821542",
  appId:"1:787509821542:web:2b54b5bafee1207edeada7"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db   = getFirestore(app);

const durum = document.getElementById("durum");

/* FORM GEÃ‡Ä°ÅLERÄ° */
function go(id){
    document.getElementById("registerForm").style.display="none";
    document.getElementById("loginForm").style.display="none";
    document.getElementById("resetForm").style.display="none";
    document.getElementById(id).style.display="block";
    durum.textContent = "";
}

document.getElementById("toLogin").onclick = ()=> go("loginForm");
document.getElementById("toReset").onclick = ()=> go("resetForm");
document.getElementById("toRegisterFromLogin").onclick = ()=> go("registerForm");
document.getElementById("toResetFromLogin").onclick = ()=> go("resetForm");
document.getElementById("toLoginFromReset").onclick = ()=> go("loginForm");

/* --- EMAIL FORMAT KONTROLÃœ --- */
function mailGecerliMi(mail){
    return /^[a-zA-Z0-9._%+-]+@gmail\.com$/.test(mail);
}

/* KAYIT */
document.getElementById("regBtn").onclick = async ()=>{
    const ad = regName.value.trim();
    const mail = regMail.value.trim();
    const pass = regPass.value;

    if(!ad||!mail||!pass){
        durum.textContent="LÃ¼tfen tÃ¼m alanlarÄ± doldurun.";
        return;
    }

    if(!mailGecerliMi(mail)){
        durum.textContent="Sadece geÃ§erli bir Gmail adresi girin.";
        return;
    }

    try{
        durum.textContent="KayÄ±t oluÅŸturuluyor...";

        const cred = await createUserWithEmailAndPassword(auth,mail,pass);

        await setDoc(doc(db,"kullanicilar",cred.user.uid),{
            kullaniciAdi:ad,
            email:mail,
            createdAt:new Date().toISOString()
        });

        durum.textContent="âœ” KayÄ±t baÅŸarÄ±lÄ±! YÃ¶nlendiriliyorsunuz...";
        setTimeout(()=>location.reload(),1500);

    }catch(e){
        durum.textContent="Hata: "+e.message;
    }
};

/* GÄ°RÄ°Å */
document.getElementById("loginBtn").onclick = async ()=>{
    const mail = loginMail.value.trim();
    const pass = loginPass.value;

    if(!mail||!pass){
        durum.textContent="Bilgileri eksiksiz girin.";
        return;
    }

    try{
        durum.textContent="GiriÅŸ yapÄ±lÄ±yor...";
        await signInWithEmailAndPassword(auth,mail,pass);
        durum.textContent="âœ” GiriÅŸ baÅŸarÄ±lÄ±!";
        setTimeout(()=>location.href="ana_site.html",1200);
    }catch(e){
        durum.textContent="Hata: "+e.message;
    }
};

/* RESET */
document.getElementById("resetBtn").onclick = async ()=>{
    const mail = resetMail.value.trim();

    if(!mail){
        durum.textContent="E-posta girin.";
        return;
    }

    try{
        durum.textContent="GÃ¶nderiliyor...";
        await sendPasswordResetEmail(auth,mail);
        durum.textContent="âœ” Åifre sÄ±fÄ±rlama maili gÃ¶nderildi!";
    }catch(e){
        durum.textContent="Hata: "+e.message;
    }
};
</script>

<!-- MÃœZÄ°K -->
<button id="musicBtn" style="position:fixed;bottom:20px;right:20px;padding:12px 20px;border:none;border-radius:10px;background:rgba(0,0,0,0.6);color:white;font-size:16px;cursor:pointer;">â–¶ Oynat</button>

<audio id="bgm">
    <source src="music.m4a" type="audio/mp4">
</audio>

<script>
const audio = document.getElementById("bgm");
const btn = document.getElementById("musicBtn");

btn.onclick=()=>{
    if(audio.paused){
        audio.play();
        btn.textContent="â¸ Durdur";
    } else {
        audio.pause();
        btn.textContent="â–¶ Oynat";
    }
};
</script>

</body>
</html>
