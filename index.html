<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>UNIXSTORM</title>

<style>
body{
margin:0;padding:0;height:100vh;
background:url("3cc68b3f22ff5463843e82b661033950.jpg") no-repeat center center fixed;
background-size:cover;font-family:Arial;
}
.center-box{
position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);
width:280px;padding:20px;background:rgba(0,0,0,0.78);
border-radius:12px;color:white;text-align:center;
}
.center-box input{width:100%;padding:10px;margin:6px 0;border-radius:8px;border:none}
.center-box button{width:100%;padding:10px;border-radius:8px;border:none;background:#006CFF;color:white}
.link-btn{margin-top:8px;display:block;cursor:pointer;text-decoration:underline}
#durum{margin-top:10px;color:#ffdede;font-weight:bold}
</style>
</head>

<body>

<div class="center-box">

<div id="registerForm">
<h3>Kayıt Ol</h3>
<input id="regName" placeholder="Kullanıcı adı">
<input id="regMail" placeholder="E-posta">
<input id="regPass" type="password" placeholder="Şifre">
<input id="regCode" placeholder="E-postaya gelen kod">
<button id="regBtn">Kayıt Ol</button>
<span class="link-btn" id="toLogin">Giriş yapın</span>
</div>

<div id="loginForm" style="display:none">
<h3>Giriş Yap</h3>
<input id="loginMail" placeholder="E-posta">
<input id="loginPass" type="password" placeholder="Şifre">
<button id="loginBtn">Giriş Yap</button>
<span class="link-btn" id="toRegister">Kayıt Ol</span>
</div>

<div id="durum"></div>
</div>

<button id="musicBtn" style="position:fixed;bottom:20px;right:20px">▶</button>
<audio id="bgm"><source src="music.m4a"></audio>

<script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-app.js";
import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-auth.js";

const app = initializeApp({
apiKey: "AIzaSyC5X_RnBnhy2k-X6Y_lezHgWbgK31Y5Dao",
authDomain: "unixstorm-9dff8.firebaseapp.com",
projectId: "unixstorm-9dff8"
});
const auth = getAuth(app);
emailjs.init("dCQownkzENRARtTC_");

const formGizle=()=>{registerForm.style.display="none";loginForm.style.display="none";}
toLogin.onclick=()=>{formGizle();loginForm.style.display="block";}
toRegister.onclick=()=>{formGizle();registerForm.style.display="block";}

let kod=null;

regBtn.onclick=async()=>{
if(!regMail.value||!regPass.value){durum.textContent="Bilgiler eksik";return;}
if(!kod){
kod=Math.floor(100000+Math.random()*900000);
await emailjs.send("service_vbm28pq","template_507m11j",{kod,mail:regMail.value});
durum.textContent="Mail kodu gönderildi";return;
}
if(regCode.value!=kod){durum.textContent="Kod yanlış";return;}
await createUserWithEmailAndPassword(auth,regMail.value,regPass.value);
durum.textContent="Kayıt başarılı yönlendiriliyorsunuz";
setTimeout(()=>location.replace("ana_site.html"),1500);
};

loginBtn.onclick=async()=>{
try{
await signInWithEmailAndPassword(auth,loginMail.value,loginPass.value);
durum.textContent="Giriş başarılı yönlendiriliyorsunuz";
setTimeout(()=>location.replace("ana_site.html"),1500);
}catch{
durum.textContent="Kullanıcı bulunamadı";
}
};

const audio=document.getElementById("bgm");
musicBtn.onclick=()=>audio.paused?(audio.play()):(audio.pause());
</script>
</body>
</html>
