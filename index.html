<!DOCTYPE html>  
<html lang="tr">  
<head>  
<meta charset="UTF-8">  
<meta name="viewport" content="width=device-width, initial-scale=1.0">  
<title>UNIXSTORM</title>  

<style>  
body{  
    margin:0;padding:0;height:100vh;  
    background:url("3cc68b3f22ff5463843e82b661033950.jpg") no-repeat center center fixed;  
    background-size:cover;font-family:Arial;  
}  
.yazi-kutu{text-align:center;margin-top:28px;}  
.anaYazi{font-size:18px;color:white;font-weight:bold;text-shadow:0 0 6px white;}  
.vip{color:orange;font-weight:bold;text-shadow:0 0 6px orange;}  
.red{color:red;font-weight:bold;text-shadow:0 0 6px red;}  

.center-box{  
    position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);  
    width:280px;padding:20px;background:rgba(0,0,0,0.78);  
    border-radius:12px;backdrop-filter:blur(5px);color:white;text-align:center;  
}  
.center-box input{  
    width:100%;padding:10px;margin:6px 0;border:none;border-radius:8px;outline:none;  
}  
.center-box button{  
    width:100%;padding:10px;margin-top:8px;border:none;border-radius:8px;  
    background:#006CFF;font-weight:bold;color:white;cursor:pointer;  
}  
.link-btn{  
    display:block;margin-top:8px;text-decoration:underline;  
    color:#ddd;cursor:pointer;  
}  
#durum{  
    margin-top:10px;min-height:22px;color:#ffebeb;font-weight:bold;font-size:14px;  
}

/* ğŸ”¥ OVERLAY (EKRAN KÄ°LÄ°TLEME) â€“ DAHA SAYDAM YAPILDI & YÃœKLEME TOPU KALDIRILDI */
#overlay {
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background: rgba(0,0,0,0.20);   /* ğŸ”¥ SaydamlÄ±k azaltÄ±ldÄ± */
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 99999;
    color: white;
    font-size: 22px;
    font-weight: bold;
    text-shadow: 0 0 8px black;
    backdrop-filter: blur(4px);
}
</style>  
</head>  

<body>  

<!-- ğŸ”¥ OVERLAY (ARTIK SADE YAZI VAR) -->
<div id="overlay">
    
</div>

<div class="yazi-kutu">  
    <div class="anaYazi">ğğ® ğ¬ğ¢ğ­ğ ğ–£˜ğ”ğğˆğ—ğ’ğ“ğğ‘ğŒğŸ‡¹ğŸ‡· (ğ—¦ğ—”ğ—›ğ—¢ ğ—¥ğ—˜ğ—œğ—¦) á´›á´€Ê€á´€Ò“Ä±É´á´…á´€É´ á´‹á´œÊ€á´œÊŸá´á´œsÌ§á´›á´œÊ€</div>  
    <div><span class="vip">ğ˜ƒğ—¶ğ—½_ğ˜‚ğ˜†ğ—²ğ—¹ğ—²ğ—¿ğŸ”± = </span><span class="red">ğŠğ€ğ€ğ ğ™ğğ‘ğğ€ & ğˆğğ…ğ€ğ™ ğ™ğğ‘ğğ€</span></div>  
</div>  

<div class="center-box">  

<!-- KAYIT -->  
<div id="registerForm">  
    <h3>KayÄ±t Ol</h3>  
    <input id="regName" placeholder="KullanÄ±cÄ± adÄ±">  
    <input id="regMail" type="email" placeholder="E-posta">  
    <input id="regPass" type="password" placeholder="Åifre">  
    <input id="regCode" placeholder="E-postaya gelen kod">  
    <button id="regBtn">KayÄ±t Ol</button>  
    <span class="link-btn" id="toLogin">GiriÅŸ yapÄ±n</span>  
    <span class="link-btn" id="toReset">Åifremi unuttum</span>  
</div>  

<!-- GÄ°RÄ°Å -->  
<div id="loginForm" style="display:none;">  
    <h3>GiriÅŸ Yap</h3>  
    <input id="loginMail" type="email" placeholder="E-posta">  
    <input id="loginPass" type="password" placeholder="Åifre">  
    <button id="loginBtn">GiriÅŸ Yap</button>  
    <span class="link-btn" id="toRegister">KayÄ±t Ol</span>  
    <span class="link-btn" id="toReset2">Åifremi unuttum</span>  
</div>  

<!-- SIFIRLAMA -->  
<div id="resetForm" style="display:none;">  
    <h3>Åifreyi SÄ±fÄ±rla</h3>  
    <input id="resetMail" type="email" placeholder="E-posta">  
    <button id="resetBtn">Kodu GÃ¶nder</button>  
    <span class="link-btn" id="toLogin2">GiriÅŸe dÃ¶n</span>  
</div>  

<!-- KOD -->  
<div id="resetCodeForm" style="display:none;">  
    <h3>Kod DoÄŸrula</h3>  
    <input id="resetCode" placeholder="Kod">  
    <button id="resetCodeBtn">DoÄŸrula</button>  
</div>  

<!-- YENÄ° ÅÄ°FRE -->  
<div id="newPassForm" style="display:none;">  
    <h3>Yeni Åifrenizi Girin</h3>  
    <input id="newPass" type="password" placeholder="Yeni ÅŸifre">  
    <button id="newPassBtn">Kaydet</button>  
</div>  

<div id="durum"></div>
</div>  

<!-- MÃœZÄ°K -->  
<button id="musicBtn" style="  
position:fixed;bottom:20px;right:20px;padding:12px 20px;  
font-size:18px;border:none;border-radius:10px;  
background:rgba(0,0,0,0.6);color:white;cursor:pointer;">
â–¶ Oynat
</button>

<audio id="bgm">  
    <source src="music.m4a" type="audio/mp4">  
</audio>  

<script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>  

<script>  
emailjs.init("dCQownkzENRARtTC_");  

const durum = document.getElementById("durum");
const overlay = document.getElementById("overlay");

/* â­ OVERLAY KONTROL â­ */
function kilitAc() { overlay.style.display = "flex"; }
function kilitKapat() { overlay.style.display = "none"; }

/* â­ FORM GEÃ‡Ä°Å â­ */
function gecisYap(id){
    kilitAc();
    setTimeout(()=>{
        formAc(id);
        kilitKapat();
        durum.textContent = "";
    }, 1200);
}

function formGizle(){
    ["registerForm","loginForm","resetForm","resetCodeForm","newPassForm"]
    .forEach(id => document.getElementById(id).style.display="none");
}
function formAc(id){
    formGizle();
    document.getElementById(id).style.display="block";
}

/* GEÃ‡Ä°Å BUTONLARI */  
toLogin.onclick = ()=> gecisYap("loginForm");  
toRegister.onclick = ()=> gecisYap("registerForm");  
toReset.onclick = ()=> gecisYap("resetForm");  
toReset2.onclick = ()=> gecisYap("resetForm");  
toLogin2.onclick = ()=> gecisYap("loginForm");  

/* ------------------ KAYIT ------------------ */  
let kod = null;  
function emailValid(e){return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e);}  

regBtn.onclick = async()=>{
    kilitAc();
    const ad = regName.value.trim();
    const mail = regMail.value.trim();
    const pass = regPass.value.trim();
    const girKod = regCode.value.trim();

    if(!ad || !mail || !pass){
        kilitKapat();
        durum.textContent = "LÃ¼tfen tÃ¼m bilgileri doldurun.";
        return;
    }

    if(!emailValid(mail)){
        kilitKapat();
        durum.textContent = "E-posta geÃ§ersiz.";
        return;
    }

    if(!kod){
        kod = Math.floor(100000 + Math.random()*900000);
        await emailjs.send("service_vbm28pq","template_507m11j",{
            kod:kod, mail:mail, zaman:new Date().toLocaleString("tr-TR")
        });
        kilitKapat();
        durum.textContent = "Mailine gelen kodu gir.";
        return;
    }

    if(girKod != kod){
        kilitKapat();
        durum.textContent = "Kod yanlÄ±ÅŸ!";
        return;
    }

    localStorage.setItem("userMail", mail);
    localStorage.setItem("userPass", pass);

    durum.textContent = "KayÄ±t baÅŸarÄ±lÄ±!";
    setTimeout(()=> location.href="ana_site.html", 1500);
};

/* ------------------ ÅÄ°FRE SIFIRLAMA ------------------ */
let resetKod = null;
let resetMailKayit = null;

resetBtn.onclick = async()=>{
    kilitAc();
    const mail = resetMail.value.trim();

    if(!emailValid(mail)){
        kilitKapat();
        durum.textContent = "Mail geÃ§ersiz.";
        return;
    }

    resetKod = Math.floor(100000 + Math.random()*900000);
    resetMailKayit = mail;

    await emailjs.send("service_vbm28pq","template_507m11j",{
        kod:resetKod, mail:mail, zaman:new Date().toLocaleString("tr-TR")
    });

    kilitKapat();
    durum.textContent = "Kod gÃ¶nderildi.";
    gecisYap("resetCodeForm");
};

resetCodeBtn.onclick = ()=>{
    if(resetCode.value.trim() != resetKod){
        durum.textContent = "Kod yanlÄ±ÅŸ!";
        return;
    }
    durum.textContent = "Kod doÄŸru.";
    gecisYap("newPassForm");
};

newPassBtn.onclick = ()=>{
    kilitAc();
    const yeni = newPass.value.trim();

    if(!yeni){
        kilitKapat();
        durum.textContent = "Åifre boÅŸ olamaz.";
        return;
    }

    localStorage.setItem("userPass", yeni);
    durum.textContent = "Åifre yenilendi.";

    setTimeout(()=>{  
        kilitKapat();
        gecisYap("loginForm");
    }, 1000);
};

/* ------------------ GÄ°RÄ°Å ------------------ */
loginBtn.onclick = ()=>{
    kilitAc();
    setTimeout(()=>{
        if(
            loginMail.value.trim() === localStorage.getItem("userMail") &&
            loginPass.value.trim() === localStorage.getItem("userPass")
        ){
            durum.textContent = "GiriÅŸ baÅŸarÄ±lÄ±!";
            setTimeout(()=> location.href="ana_site.html", 1200);
        } else {
            durum.textContent = "Bilgiler yanlÄ±ÅŸ!";
            kilitKapat();
        }
    }, 800);
};

/* ------------------ MÃœZÄ°K ------------------ */
const audio = document.getElementById("bgm");
const btn = document.getElementById("musicBtn");

btn.onclick = ()=>{
    if(audio.paused){audio.play();btn.textContent="â¸ Durdur";}
    else{audio.pause();btn.textContent="â–¶ Oynat";}
};
</script>  
</body>  
    </html>
